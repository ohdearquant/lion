<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lion UI</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        button { margin: 5px; padding: 8px 15px; }
        pre { background: #f5f5f5; padding: 15px; }
    </style>
</head>
<body>
    <h1>Lion UI - CLI Integration</h1>
    
    <div>
        <button id="loadPlugin">Load Plugin</button>
        <button id="listPlugins">List Plugins</button>
        <button id="callPlugin">Call Plugin Function</button>
    </div>
    
    <pre id="output">Results will appear here...</pre>

    <script>
        document.getElementById('loadPlugin').addEventListener('click', async () => {
            try {
                const result = await window.__TAURI__.invoke('load_plugin_integrated', { 
                    request: {
                        path: "../../plugins/calculator/calculator_plugin.wasm",
                        name: 'Calculator'
                    }
                });
                document.getElementById('output').textContent = `Plugin loaded: ${result}`;
            } catch (error) {
                document.getElementById('output').textContent = `Error: ${error}`;
            }
        });
        
        document.getElementById('listPlugins').addEventListener('click', async () => {
            try {
                const plugins = await window.__TAURI__.invoke('list_plugins_integrated');
                document.getElementById('output').textContent = `Plugins: ${JSON.stringify(plugins, null, 2)}`;
            } catch (error) {
                document.getElementById('output').textContent = `Error: ${error}`;
            }
        });
        
        document.getElementById('callPlugin').addEventListener('click', async () => {
            try {
                const plugins = await window.__TAURI__.invoke('list_plugins_integrated');
                if (plugins.length > 0) {
                    const result = await window.__TAURI__.invoke('call_plugin_integrated', {
                        request: {
                            plugin_id: plugins[0].id,
                            function: "calculate",
                            args: JSON.stringify({x: 5, y: 3, operation: "add"})
                        }
                    });
                    document.getElementById('output').textContent = `Result: ${result}`;
                } else {
                    document.getElementById('output').textContent = "No plugins loaded";
                }
            } catch (error) {
                document.getElementById('output').textContent = `Error: ${error}`;
            }
        });
    </script>
</body>
</html>
